
<!-- 头部：管理 -->

  <view  class='bg-white padding-sm justify-end flex' hidden='{{hfShow}}'>
    <text class='text-orange' catchtap='adminTap'>{{adminShow?'完成':'编辑'}}</text>
  </view>

  <!-- 中部滑动：显示购物车列表 -->
  <scroll-view scroll-y  style="height:calc((100vh - 102rpx) - 84rpx - 84rpx)"> 
    <view class="container carts-list" wx:if="{{shopcarData==''}}">
      <view class="cartnull">
        <image class="scimg" src="/images/person/search_no.png" mode="aspectFill"/>
      </view>
      <view class="cartnull">
        <text >购物车空空如也/(ㄒoㄒ)/~~</text>
      </view>
      <view class="cartnull">
        <button bindtap="goshop" style="width:300rpx;margin-top:50rpx;" class="cu-btn line-orange lg">去逛逛</button>
      </view>
    </view>
    <view class='shop' wx:for='{{shopcarData}}' wx:key>  
      <view class="flex align-center padding-xs" >
      <view style="height:100%;width:30rpx;" >
        <text class="cuIcon-round" hidden='{{item.check}}' bindtap="shopcheck" data-index='{{item.shopId}}'></text> 
        <text class="cuIcon-roundcheckfill" hidden='{{!item.check}}' bindtap="shopcheck" data-index='{{item.shopId}}'></text> 
        </view>
      <view  bindtap="gotoShop" data-shopId="{{item.shopId}}" data-shopName="{{item.shopName}}">
        <view class="cu-avatar sm round margin-left" style="background-image:url(https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg);"></view>
          <text class="text-bold margin-left text-lg" >{{item.shopName}}</text>
          <text class="margin-left {{'cuIcon-right text-gray'}}" ></text>
          </view>
      </view>
      <view class="flex bg-white" wx:for='{{item.itemdata}}' wx:for-item="items" wx:key bindlongtap="delete" data-id="{{items.id}}"  data-index="{{index}}">
        <view class='shop_check_box'>  
          <text class="cuIcon-round" bindtap="checkTap"  hidden='{{items.check}}' data-id="{{items.id}}" data-index="{{item.shopId}}" ></text>   
          <text class="cuIcon-roundcheckfill" bindtap="checkTap"  hidden='{{!items.check}}' data-id="{{items.id}}" data-index="{{item.shopId}}" ></text>  
        </view>    
        <view class="padding-xs flex">
        <view class="productImg">
          <image class ="scimg" src="https://m.360buyimg.com/n12/jfs/t11317/108/1080677336/325163/f4c2a03a/59fd8b17Nbe2fcca3.jpg!q70.jpg" mode="widthFix"></image>
        </view>  
        <view  >
          <view >
            <text class='shop_name'>{{items.name}}</text>        
            <text class='shop_type'>4G全网通；幻夜黑；官方标配；4+64G4G全网通；幻夜黑；官方标配；4+64G4G全网通；幻夜黑；官方标配；4+64G</text>   
          </view>        
          <view class="margin-top flex align-center justify-between" >
            <text class='text-red text-price'>{{items.money}}</text> 
            <view> 
            <view class="cu-tag {{items.number == '1' ? 'bg-gray':'bg-grey'}}" 
              data-index='{{item.shopId}}' 
              data-types='minus' 
              data-id="{{items.id}}"
              catchtap='numchangeTap'>
              <text class="cuIcon-move"></text>
            </view> 
            <view class="cu-tag line-grey" bindtap="showModal" data-id="{{items.id}}" data-target="nameModal" data-number="{{items.number}}">{{items.number}} </view> 
            <view class="cu-tag  bg-grey" 
              data-index='{{item.shopId}}' 
              data-types='add' 
              catchtap='numchangeTap' 
              data-id="{{items.id}}">
              <text class="cuIcon-add"></text>
            </view> 
            </view> 
          </view>       
        </view>
        </view>
      </view>  
    </view>
  </scroll-view>

 <!-- // 底部 -->
  <view class='footer' hidden='{{hfShow}}' >   
      <text style="margin-left: 20rpx;" class="cuIcon-round" hidden='{{allsel}}' catchtap='allcheckTap'></text>   
      <text style="margin-left: 20rpx;" class="cuIcon-roundcheckfill"  hidden='{{!allsel}}' catchtap='allcheckTap'></text>    
      <text class='check_text'>全选</text>   
          <text class='footer_total_text' hidden='{{adminShow}}'>合计：<text class='footer_total_price'>￥{{total}}    </text> </text>  
    <text class='footer_total' hidden='{{adminShow}}' catchtap="goclearingTap">结算<text>({{itemNumber}})</text></text>
    
    <text hidden='{{!adminShow}}' style="background-color:{{pageBackgroundColor}}" class='deleteshop'  catchtap='deleteshopTap'>删除</text>
    </view> 




<!-- 点击姓名时出现弹框 -->
		<view class="cu-modal {{modalName=='nameModal'?'show':''}}">
			<form class="cu-dialog" bindsubmit="formSubmit" bindreset="formReset">
				<view class="padding bg-white flex justify-center">
					 <input class="name-input" maxlength="10" name='cartNumber' value='{{cartNumber}}' type="text" placeholder="请输入修改数量" />
				</view>
        <view class="grid col-2 text-center bg-white " style="border-top: 1px solid #f1f1f1">
          <view class="padding-xs" style="flex:1;border-right: 1px solid #f1f1f1">
            <button class="cu-btn  bg-white" form-type="reset" bindtap="hideModal">取消</button>
          </view>
          <view class="padding-xs" style="flex:1">
            <button class="cu-btn text-blue bg-white"  form-type="submit" bindtap="hideModal">确定</button>
          </view>
        </view>
			</form>
		</view>