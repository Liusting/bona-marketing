<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.SpCartMapper">
    <!--表字段与po字段映射-->
    <resultMap id="BaseResultMap" type="com.example.demo.po.SpCart">
        <id column="ID" property="id" />
        <id column="NUMBER" property="number" />
        <id column="USERID" property="userId" />
        <id column="ITEMID" property="itemId" />
        <id column="TYPEID" property="typeId" />
    </resultMap>

    <sql id="Base_Column_List">
        ID AS id,,NUMBER AS number,USERID AS userId, ITEMID AS itemId, TYPEID AS typeId
    </sql>
    <!--购物车查询-->
    <select id="getCartDetail" resultType="java.util.Map">
        SELECT sc.id,sc.type_id,sc.item_id,sc.user_id,sc.number,si.name,si.shop_id,'false' AS 'check','200' AS 'money'
        from sp_cart sc
        JOIN sp_item si
        ON sc.item_id = si.id
    </select>
    <!--加入购物车-->
    <insert id="insertCart">
        INSERT INTO
        sp_cart
        (id,type_id,item_id,user_id,number,create_time)
        VALUES(
        #{spCart.id,jdbcType=VARCHAR},
         #{spCart.typeId,jdbcType=VARCHAR},
         #{spCart.itemId,jdbcType=VARCHAR},
         #{spCart.userId,jdbcType=VARCHAR},
         #{spCart.number,jdbcType=INTEGER},
         NOW())
    </insert>
    <!--更新购物车商品的数量-->
    <update id="updateCartNumber" >
        UPDATE  sp_cart
        set number = #{number}
        WHERE  id = #{id}
    </update>

    <!--删除购物车商品-->
    <delete id="deleteCart" >
        DELETE FROM sp_cart
        WHERE id = #{id}
    </delete>

</mapper>
